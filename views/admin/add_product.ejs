<%- include('../_layout/adminheader') %>

<h2 class="page-title" style="margin-top: 6%;">Add a product</h2>
<a href="/admin/products" class="btn btn-primary">Back to all products</a>
<br><br>

<form method="post" action="/admin/products/add-product" enctype="multipart/form-data">
    
    <div class="form-group">
        <label for=""><b>Title</b></label>
        <input type="text" class="form-control" name="title" value="<%= title %>" placeholder="Title">
    </div>
    
    <div class="form-group">
        <label for=""><b>Description</b></label>
        <textarea name="desc" id="ta" class="form-control" cols="30" rows="10" placeholder="Description"><%= desc %></textarea>
    </div>
    
    <div class="form-group">
        <label for=""><b>Category</b></label>
        <select name="category" class="form-control">
            <% categories.forEach(function(cat){ %>
                <option value="<%= cat.slug %>"><%= cat.title %></option>
            <% }); %>
        </select>
    </div>
    
    <div class="form-group">
        <label for=""><b>Price</b></label>
        <input type="text" class="form-control" name="price" value="<%= price %>" placeholder="Price">
    </div>
    
    <div class="form-group">
        <label for=""><b>Image</b></label>
        <input type="file" accept='image/*' class="form-control" name="image" id="img" onchange='openFile(event)'>
        <img src="#" id="imgPreview" alt="" style="width: 20%;">
    </div>
    
    <button class="btn btn-danger">Submit</button>
</form>

<script>
  var openFile = function(event) {
    var input = event.target;

    var reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
      var output = document.getElementById('imgPreview');
      output.src = dataURL;
    };
    reader.readAsDataURL(input.files[0]);
  };
</script>

<%- include('../_layout/adminfooter') %>